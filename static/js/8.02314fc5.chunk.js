(this["webpackJsonphomepage-typescript"]=this["webpackJsonphomepage-typescript"]||[]).push([[8],{238:function(e,t,a){"use strict";a.r(t);var n=a(27),i=a(0),l=a.n(i),o=a(44),d=a(166),c=a(239),r=a(226);function u(e){let t=e.index,a=e.onChangeIndex,n=e.list,i=Object(o.a)(e,["index","onChangeIndex","list"]);return l.a.createElement(d.a,Object.assign({position:"static",color:"default"},i),l.a.createElement(c.a,{value:t,onChange:a,indicatorColor:"primary",textColor:"primary",centered:!0,"aria-label":"full width tabs"}," ",n.map((e,t)=>l.a.createElement(r.a,{key:e.id,label:e.name,id:"tab-".concat(t),"aria-controls":"tabpanel-".concat(t),disabled:e.disabled}))))}var s=a(164),m=a(11),v=a(228),g=a(243),b=a(227),f=a(202),h=a.n(f),p=a(81),E=a.n(p),k=a(18);const O=Object(s.a)(e=>({absolute:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},extendedIcon:{marginRight:e.spacing(1)}}));function y(e){var t,a,n,i,d,c,r,u,s,f,p,y;let j=e.onClick,C=e.isResetButton,W=e.disabled,L=void 0!==W&&W,w=Object(o.a)(e,["onClick","isResetButton","disabled"]);const x=O(),S=Object(m.a)(),M=Object(k.c)().translation,N={enter:S.transitions.duration.enteringScreen,exit:S.transitions.duration.leavingScreen};return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{in:!C,timeout:N,style:{transitionDelay:"".concat(C?0:N.exit,"ms")},unmountOnExit:!0},l.a.createElement(g.a,Object.assign({title:null===M||void 0===M||null===(t=M.random)||void 0===t||null===(a=t.fab)||void 0===a?void 0:a.pick,"aria-label":null===M||void 0===M||null===(n=M.random)||void 0===n||null===(i=n.fab)||void 0===i?void 0:i.pick},w),l.a.createElement(v.a,{color:"primary",className:x.absolute,onClick:L?void 0:j,variant:"extended"},l.a.createElement(h.a,{className:x.extendedIcon}),null===M||void 0===M||null===(d=M.random)||void 0===d||null===(c=d.fab)||void 0===c?void 0:c.pick))),l.a.createElement(b.a,{in:C,timeout:N,style:{transitionDelay:"".concat(C?N.exit:0,"ms")},unmountOnExit:!0},l.a.createElement(g.a,Object.assign({title:null===M||void 0===M||null===(r=M.random)||void 0===r||null===(u=r.fab)||void 0===u?void 0:u.reset,"aria-label":null===M||void 0===M||null===(s=M.random)||void 0===s||null===(f=s.fab)||void 0===f?void 0:f.reset},w),l.a.createElement(v.a,{color:"secondary",className:x.absolute,onClick:L?void 0:j,variant:"extended"},l.a.createElement(E.a,{className:x.extendedIcon}),null===M||void 0===M||null===(p=M.random)||void 0===p||null===(y=p.fab)||void 0===y?void 0:y.reset))))}var j=a(188),C=a(190),W=a(189),L=a(163),w=a(60);const x=Object(s.a)(e=>({root:{minWidth:275,padding:e.spacing(2),textAlign:"center"},actions:{}}));function S(e){var t,a,n,i;let d=e.title,c=e.subtitle,r=e.onResetClick,u=e.onCheckClick,s=Object(o.a)(e,["title","subtitle","onResetClick","onCheckClick"]);const m=x(),v=Object(k.c)().translation;return l.a.createElement(j.a,Object.assign({className:m.root},s),l.a.createElement(W.a,null,l.a.createElement(w.a,{variant:"h5",component:"h2"},d),l.a.createElement(w.a,{color:"textSecondary"},null!==c&&void 0!==c?c:l.a.createElement("br",null))),l.a.createElement(C.a,{className:m.actions},l.a.createElement(L.a,{size:"small",onClick:r,color:"secondary"},null===v||void 0===v||null===(t=v.random)||void 0===t||null===(a=t.resultCard)||void 0===a?void 0:a.resetButton),l.a.createElement(L.a,{size:"small",onClick:u,color:"secondary"},null===v||void 0===v||null===(n=v.random)||void 0===n||null===(i=n.resultCard)||void 0===i?void 0:i.checkButton)))}var M=a(165),N=a(160),I=a(121),z=a(168),T=a(169),B=a(230),R=a(232),P=a(231),F=a(229),A=a(203),G=a.n(A),D=a(204),q=a.n(D);const H=Object(s.a)(e=>({nested:{paddingLeft:e.spacing(4)}}));function X(e){var t,a,i,d,c,r,u,s,v,g,b,f;let h=e.pickedList,p=e.randomList,E=e.totalWeight,O=e.onClose,y=e.open,j=Object(o.a)(e,["pickedList","randomList","totalWeight","onClose","open"]);const C=H(),W=Object(k.c)().translation,w=l.a.useState(!1),x=Object(n.a)(w,2),S=x[0],A=x[1],D=l.a.useState(!0),X=Object(n.a)(D,2),J=X[0],K=X[1],Q=Object(m.a)(),U=Object(M.a)(Q.breakpoints.down("sm")),V=[...p].sort((e,t)=>t.weight-e.weight),Y=E;function Z(e,t=!1){var a,n,i;return null===(a=null===W||void 0===W||null===(i=W.random)||void 0===i?void 0:i.locationList)||void 0===a||null===(n=a[null!==e&&void 0!==e?e:""])||void 0===n?void 0:n[t?"alias":"name"]}return l.a.createElement(F.a,Object.assign({onClose:O,"aria-labelledby":"simple-dialog-title",open:y,fullScreen:U,fullWidth:!0,maxWidth:"sm"},j)," ",l.a.createElement(B.a,{id:"simple-dialog-title"},null===W||void 0===W||null===(t=W.random)||void 0===t||null===(a=t.dialog)||void 0===a?void 0:a.checkTitle),l.a.createElement(P.a,null,l.a.createElement(N.a,null,l.a.createElement(I.a,{button:!0,onClick:()=>K(!J)},l.a.createElement(z.a,{primary:null===W||void 0===W||null===(i=W.random)||void 0===i||null===(d=i.dialog)||void 0===d?void 0:d.leftList}),J?l.a.createElement(G.a,null):l.a.createElement(q.a,null)),l.a.createElement(T.a,{in:J,timeout:"auto",unmountOnExit:!0},l.a.createElement(N.a,{component:"div",disablePadding:!0},V.length?V.map(e=>l.a.createElement(I.a,{key:e.id,button:!0,className:C.nested},l.a.createElement(z.a,{primary:"".concat(Z(e.id)," ").concat(Z(e.id,!0)?"(".concat(Z(e.id,!0),")"):""),secondary:"".concat((e.weight/Y*100).toFixed(2),"%")}))):l.a.createElement(I.a,{button:!0,className:C.nested},l.a.createElement(z.a,{secondary:null===W||void 0===W||null===(c=W.random)||void 0===c||null===(r=c.dialog)||void 0===r?void 0:r.empty})))),l.a.createElement(I.a,{button:!0,onClick:()=>A(!S)},l.a.createElement(z.a,{primary:null===W||void 0===W||null===(u=W.random)||void 0===u||null===(s=u.dialog)||void 0===s?void 0:s.pickedList}),S?l.a.createElement(G.a,null):l.a.createElement(q.a,null)),l.a.createElement(T.a,{in:S,timeout:"auto",unmountOnExit:!0},l.a.createElement(N.a,{component:"div",disablePadding:!0},h.length?h.map(e=>l.a.createElement(I.a,{key:e.id,button:!0,className:C.nested},l.a.createElement(z.a,{primary:"".concat(Z(e.id))}))):l.a.createElement(I.a,{button:!0,className:C.nested},l.a.createElement(z.a,{secondary:null===W||void 0===W||null===(v=W.random)||void 0===v||null===(g=v.dialog)||void 0===g?void 0:g.empty})))))),l.a.createElement(R.a,null,l.a.createElement(L.a,{onClick:O,autoFocus:!0,color:"secondary"}," ",null===W||void 0===W||null===(b=W.random)||void 0===b||null===(f=b.dialog)||void 0===f?void 0:f.returnButton)))}var J=a(61),K=a(237);const Q=Object(s.a)(e=>({nested:{paddingLeft:e.spacing(2)}}));function U(e){var t,a,d,c,r,u;let s=e.randomList,v=e.onClose,g=e.open,b=Object(o.a)(e,["randomList","onClose","open"]);const f=Q(),h=Object(k.c)().translation,p=Object(m.a)(),E=Object(M.a)(p.breakpoints.down("sm")),O=s.map(e=>Object(J.a)(Object(J.a)({},e),{},{weight:e.defaultWeight})).sort((e,t)=>t.defaultWeight-e.defaultWeight),y=Object(i.useState)(O),j=Object(n.a)(y,2),C=j[0],W=j[1];function w(e){return function(t,a){null===v||void 0===v||v(t,e?C:null,a)}}function x(e,t=!1){var a,n,i;return null===(a=null===h||void 0===h||null===(i=h.random)||void 0===i?void 0:i.locationList)||void 0===a||null===(n=a[null!==e&&void 0!==e?e:""])||void 0===n?void 0:n[t?"alias":"name"]}return l.a.createElement(F.a,Object.assign({onClose:w(!1),"aria-labelledby":"customize-dialog-title",open:g,fullScreen:E,fullWidth:!0,maxWidth:"sm"},b),l.a.createElement(B.a,{id:"customize-dialog-title"},null===h||void 0===h||null===(t=h.random)||void 0===t||null===(a=t.dialog)||void 0===a?void 0:a.customizeTitle),l.a.createElement(P.a,null,l.a.createElement("form",{autoComplete:"off"},l.a.createElement(N.a,{component:"div",disablePadding:!0},C.map(e=>{var t,a,n,i,o;return l.a.createElement(I.a,{key:e.id,button:!0,className:f.nested},l.a.createElement(z.a,{primary:"".concat(x(e.id)," ").concat(x(e.id,!0)?"(".concat(x(e.id,!0),")"):""),secondary:"".concat(null===h||void 0===h||null===(t=h.random)||void 0===t||null===(a=t.dialog)||void 0===a?void 0:a.defaultWeightTag).concat(e.defaultWeight)}),l.a.createElement(K.a,{id:"input-".concat(e.id),label:null===h||void 0===h||null===(n=h.random)||void 0===n||null===(i=n.dialog)||void 0===i?void 0:i.weight,required:!0,type:"number",value:e.weight,onChange:(o=e.id,function(e){const t=+e.target.value;W(e=>{const a=[...e];return a.find(e=>e.id===o).weight=t>0?t:0,a})})}))})))),l.a.createElement(R.a,null,l.a.createElement(L.a,{onClick:w(!0),color:"secondary"},null===h||void 0===h||null===(d=h.random)||void 0===d||null===(c=d.dialog)||void 0===c?void 0:c.submitButton),l.a.createElement(L.a,{onClick:w(!1),color:"primary"},null===h||void 0===h||null===(r=h.random)||void 0===r||null===(u=r.dialog)||void 0===u?void 0:u.cancelButton)))}var V=a(205);function Y(e,t){var a,n,i;switch(t.type){case"pick":if(0===e.randomList.length)return Object(J.a)(Object(J.a)({},e),{},{done:!0});let c=Math.random()*e.totalWeight,r={weight:0};var l,o=Object(V.a)(e.randomList);try{for(o.s();!(l=o.n()).done;){let e=l.value;if(c-=e.weight,c<0){r=e;break}}}catch(d){o.e(d)}finally{o.f()}return Object(J.a)(Object(J.a)({},e),{},{pickedItem:r,randomList:e.randomList.filter(e=>e!==r),pickedList:[...e.pickedList,r],totalWeight:e.totalWeight-r.weight,done:!1});case"reset":return Z(null!==(a=t.originalList)&&void 0!==a?a:e.originalList,null!==(n=t.condition)&&void 0!==n?n:e.condition,null!==(i=t.coords)&&void 0!==i?i:e.coords);default:throw new TypeError("Wrong action.type!")}}function Z(e,t="default",a){const n=e.map(e=>Object(J.a)(Object(J.a)({},e),{},{weight:$(t,e,a)}));return{pickedItem:null,originalList:[...e],condition:t,coords:a,randomList:n,pickedList:[],totalWeight:n.reduce((e,t)=>e+t.weight,0),done:!1}}function $(e,t,a){var i;switch(e){case"nearest":if(!a)throw new TypeError("coords does not exist!");const e=function(e,t,a=6371e3){const i=[e.latitude,t.latitude,e.longitude,t.longitude].map(e=>Math.PI*e/180),l=Object(n.a)(i,4),o=l[0],d=l[1],c=l[2],r=d-o,u=l[3]-c,s=Math.pow(Math.sin(r/2),2)+Math.cos(o)*Math.cos(d)*Math.pow(Math.sin(u/2),2);return a*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}(t,a);return e<500?4*t.defaultWeight:e<1e3?3*t.defaultWeight:e<2e3?2*t.defaultWeight:1*t.defaultWeight;case"customize":return null!==(i=t.weight)&&void 0!==i?i:t.defaultWeight;default:return t.defaultWeight}}var _=a(191),ee=a(242);const te=[{id:"XiaoFu",latitude:25.018525,longitude:121.537426,defaultWeight:4},{id:"ApexBuilding",latitude:25.014697,longitude:121.537902,defaultWeight:4},{id:"TsunHsien",latitude:25.013202,longitude:121.536323,defaultWeight:2},{id:"NewMoonPavilion",latitude:25.018563,longitude:121.534016,defaultWeight:1},{id:"DrunkenMoonLake",latitude:25.020154,longitude:121.538194,defaultWeight:2},{id:"SportsCenter",latitude:25.021653,longitude:121.53513,defaultWeight:1},{id:"CheeChun",latitude:25.021739,longitude:121.537294,defaultWeight:1},{id:"M1",latitude:25.015991,longitude:121.544738,defaultWeight:4},{id:"M7",latitude:25.015175,longitude:121.546959,defaultWeight:1},{id:"M8",latitude:25.016973,longitude:121.544982,defaultWeight:1},{id:"F9",latitude:25.019434,longitude:121.539474,defaultWeight:2},{id:"XiaoXiaoFu",latitude:25.015451,longitude:121.537217,defaultWeight:2},{id:"118",latitude:25.021954,longitude:121.542822,defaultWeight:4},{id:"Wenzhou",latitude:25.018717,longitude:121.533541,defaultWeight:4},{id:"Gongguan",latitude:25.016049,longitude:121.532804,defaultWeight:4},{id:"Shuiyuan",latitude:25.013742,longitude:121.534973,defaultWeight:4}];a.d(t,"default",(function(){return ne}));const ae=Object(s.a)(e=>({result:{color:e.palette.grey[100],textAlign:"center"},gridContainer:{flexGrow:1,margin:0,width:"100%",padding:e.spacing(2)},gridItem:{},snackbar:{[e.breakpoints.down("xs")]:{bottom:90}}}));function ne(){var e,t,a,o,d,c,r,s,m,v,g,b,f,h,p,E,O,j;const C=ae(),W=Object(k.c)().translation,w=(F=te,Object(i.useReducer)(Y,F,Z)),x=Object(n.a)(w,2),M=x[0],N=M.pickedItem,I=M.totalWeight,z=M.randomList,T=M.pickedList,B=M.originalList,R=M.done,P=x[1];var F;const A=l.a.useState(0),G=Object(n.a)(A,2),D=G[0],q=G[1],H=l.a.useState("default"),J=Object(n.a)(H,2),K=J[0],Q=J[1],V=l.a.useState(!1),$=Object(n.a)(V,2),ne=$[0],ie=$[1],le=l.a.useState(!1),oe=Object(n.a)(le,2),de=oe[0],ce=oe[1],re=l.a.useState(!1),ue=Object(n.a)(re,2),se=ue[0],me=ue[1],ve=function(e=0,t=5e3){const a=Object(i.useState)({latitude:0,longitude:0}),l=Object(n.a)(a,2),o=l[0],d=l[1],c=Object(i.useState)(!1),r=Object(n.a)(c,2),u=r[0],s=r[1];return Object(i.useEffect)(()=>{if(u){if(console.log(u),!navigator.geolocation)throw new ReferenceError("\u700f\u89bd\u5668\u4e0d\u652f\u63f4 Geolocation \u529f\u80fd\uff01");navigator.geolocation.getCurrentPosition((function({coords:{latitude:e,longitude:t}}){d({latitude:e,longitude:t}),s(!1)}),(function(e){throw e}),{enableHighAccuracy:!0,timeout:t,maximumAge:e})}},[e,t,u]),{coords:o,isPending:u,startGeolocation:()=>s(!0)}}(),ge=ve.coords,be=ve.isPending,fe=ve.startGeolocation,he=[{id:"default",name:null===W||void 0===W||null===(e=W.random)||void 0===e||null===(t=e.randomType)||void 0===t?void 0:t.default},{id:"nearest",name:null===W||void 0===W||null===(a=W.random)||void 0===a||null===(o=a.randomType)||void 0===o?void 0:o.nearest},{id:"customize",name:null===W||void 0===W||null===(d=W.random)||void 0===d||null===(c=d.randomType)||void 0===c?void 0:c.customize}];function pe(e){P({type:"reset"})}return l.a.useEffect(()=>{R&&me(!0)},[R]),l.a.useEffect(()=>{"nearest"!==K||be||P({type:"reset",condition:"nearest",coords:ge})},[K,be,P,ge]),l.a.createElement(l.a.Fragment,null,l.a.createElement(u,{index:D,onChangeIndex:function(e,t){const a=he[t].id;Q(a),q(t),"nearest"!==a?"customize"!==a?P({type:"reset",originalList:te,condition:a}):ce(!0):fe()},list:he}),l.a.createElement(_.a,{container:!0,justify:"center",alignItems:"center",className:C.gridContainer}," ",l.a.createElement(_.a,{item:!0,xs:12,sm:6,md:4,className:C.gridItem},l.a.createElement(S,{title:function(e){var t,a,n,i;return"nearest"===K&&!0===be?null===W||void 0===W||null===(t=W.random)||void 0===t||null===(a=t.resultCard)||void 0===a?void 0:a.locating:null!==e&&void 0!==e?e:null===W||void 0===W||null===(n=W.random)||void 0===n||null===(i=n.resultCard)||void 0===i?void 0:i.defaultTitle}(null===(r=null===W||void 0===W||null===(m=W.random)||void 0===m?void 0:m.locationList)||void 0===r||null===(s=r[null!==(v=null===N||void 0===N?void 0:N.id)&&void 0!==v?v:""])||void 0===s?void 0:s.name),subtitle:null===(g=null===W||void 0===W||null===(f=W.random)||void 0===f?void 0:f.locationList)||void 0===g||null===(b=g[null!==(h=null===N||void 0===N?void 0:N.id)&&void 0!==h?h:""])||void 0===b?void 0:b.alias,onResetClick:pe,onCheckClick:function(){ie(!0)}}))),l.a.createElement(y,{isResetButton:R,onClick:function(){P(R?{type:"reset",condition:K,coords:ge}:{type:"pick"})},disabled:be}),l.a.createElement(X,{randomList:z,pickedList:T,totalWeight:I,open:ne,onClose:()=>ie(!1)}),l.a.createElement(U,{randomList:B,open:de,onClose:function(e,t){if(ce(!1),null==t)return q(0),Q("default"),void P({type:"reset",originalList:te,condition:"default"});P({type:"reset",condition:"customize",originalList:t})}}),l.a.createElement(ee.a,{open:se,autoHideDuration:3e3,message:null===W||void 0===W||null===(p=W.random)||void 0===p||null===(E=p.snackbar)||void 0===E?void 0:E.msg,onClose:()=>me(!1),action:l.a.createElement(L.a,{color:"inherit",size:"small",onClick:pe},null===W||void 0===W||null===(O=W.random)||void 0===O||null===(j=O.snackbar)||void 0===j?void 0:j.button),className:C.snackbar}))}}}]);
//# sourceMappingURL=8.02314fc5.chunk.js.map