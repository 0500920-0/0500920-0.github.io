(this["webpackJsonphomepage-typescript"]=this["webpackJsonphomepage-typescript"]||[]).push([[6],{209:function(e,t,n){"use strict";n.r(t);var i=n(23),a=n(17),o=n(0),l=n.n(o),d=n(141),r=n(210),u=n(196);function c(e){var t=e.index,n=e.onChangeIndex,i=e.list;return l.a.createElement(d.a,{position:"static",color:"default"},l.a.createElement(r.a,{value:t,onChange:n,indicatorColor:"primary",textColor:"primary",centered:!0,"aria-label":"full width tabs"}," ",i.map((function(e,t){return l.a.createElement(u.a,{key:e.id,label:e.name,id:"tab-".concat(t),"aria-controls":"tabpanel-".concat(t),disabled:e.disabled})}))))}var v=n(140),s=n(20),m=n(198),g=n(214),f=n(197),h=n(175),b=n.n(h),p=n(63),E=n.n(p),y=n(18),k=Object(v.a)((function(e){return{absolute:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},extendedIcon:{marginRight:e.spacing(1)}}}));function C(e){var t,n,i,a,d,r,u,c,v,h,p,C,O=e.onClick,j=e.isResetButton,W=e.disabled,x=void 0!==W&&W,w=k(),L=Object(s.a)(),S=Object(o.useContext)(y.a).translation,M={enter:L.transitions.duration.enteringScreen,exit:L.transitions.duration.leavingScreen};return l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{in:!j,timeout:M,style:{transitionDelay:"".concat(j?0:M.exit,"ms")},unmountOnExit:!0},l.a.createElement(g.a,{title:null===S||void 0===S?void 0:null===(t=S.random)||void 0===t?void 0:null===(n=t.fab)||void 0===n?void 0:n.pick,"aria-label":null===S||void 0===S?void 0:null===(i=S.random)||void 0===i?void 0:null===(a=i.fab)||void 0===a?void 0:a.pick},l.a.createElement(m.a,{color:"primary",className:w.absolute,onClick:x?void 0:O,variant:"extended"},l.a.createElement(b.a,{className:w.extendedIcon}),null===S||void 0===S?void 0:null===(d=S.random)||void 0===d?void 0:null===(r=d.fab)||void 0===r?void 0:r.pick))),l.a.createElement(f.a,{in:j,timeout:M,style:{transitionDelay:"".concat(j?M.exit:0,"ms")},unmountOnExit:!0},l.a.createElement(g.a,{title:null===S||void 0===S?void 0:null===(u=S.random)||void 0===u?void 0:null===(c=u.fab)||void 0===c?void 0:c.reset,"aria-label":null===S||void 0===S?void 0:null===(v=S.random)||void 0===v?void 0:null===(h=v.fab)||void 0===h?void 0:h.reset},l.a.createElement(m.a,{color:"secondary",className:w.absolute,onClick:x?void 0:O,variant:"extended"},l.a.createElement(E.a,{className:w.extendedIcon}),null===S||void 0===S?void 0:null===(p=S.random)||void 0===p?void 0:null===(C=p.fab)||void 0===C?void 0:C.reset))))}var O=n(160),j=n(162),W=n(161),x=n(139),w=n(47),L=Object(v.a)((function(e){return{root:{minWidth:275,padding:e.spacing(2),textAlign:"center"},actions:{}}}));function S(e){var t,n,i,a,d=e.title,r=e.subtitle,u=e.onResetClick,c=e.onCheckClick,v=L(),s=Object(o.useContext)(y.a).translation;return l.a.createElement(O.a,{className:v.root},l.a.createElement(W.a,null,l.a.createElement(w.a,{variant:"h5",component:"h2"},d),l.a.createElement(w.a,{color:"textSecondary"},null!==r&&void 0!==r?r:l.a.createElement("br",null))),l.a.createElement(j.a,{className:v.actions},l.a.createElement(x.a,{size:"small",onClick:u,color:"secondary"},null===s||void 0===s?void 0:null===(t=s.random)||void 0===t?void 0:null===(n=t.resultCard)||void 0===n?void 0:n.resetButton),l.a.createElement(x.a,{size:"small",onClick:c,color:"secondary"},null===s||void 0===s?void 0:null===(i=s.random)||void 0===i?void 0:null===(a=i.resultCard)||void 0===a?void 0:a.checkButton)))}var M=n(31),N=n(199),z=n(136),I=n(101),T=n(146),B=n(203),P=n(201),F=n(204),R=n(202),A=n(200),G=n(176),D=n.n(G),q=n(177),H=n.n(q),X=Object(v.a)((function(e){return{nested:{paddingLeft:e.spacing(4)}}}));function J(e){var t,n,a,d,r,u,c,v,m,g,f,h,b=e.pickedList,p=e.randomList,E=e.totalWeight,k=e.onClose,C=e.open,O=X(),j=Object(o.useContext)(y.a).translation,W=l.a.useState(!1),w=Object(i.a)(W,2),L=w[0],S=w[1],G=l.a.useState(!0),q=Object(i.a)(G,2),J=q[0],K=q[1],Q=Object(s.a)(),U=Object(N.a)(Q.breakpoints.down("sm")),V=Object(M.a)(p).sort((function(e,t){return t.weight-e.weight})),Y=E;function Z(e){var t,n,i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null===(t=null===j||void 0===j?void 0:null===(i=j.random)||void 0===i?void 0:i.locationList)||void 0===t?void 0:null===(n=t[null!==e&&void 0!==e?e:""])||void 0===n?void 0:n[a?"alias":"name"]}return l.a.createElement(A.a,{onClose:k,"aria-labelledby":"simple-dialog-title",open:C,fullScreen:U,fullWidth:!0,maxWidth:"sm"}," ",l.a.createElement(P.a,{id:"simple-dialog-title"},null===j||void 0===j?void 0:null===(t=j.random)||void 0===t?void 0:null===(n=t.dialog)||void 0===n?void 0:n.checkTitle),l.a.createElement(R.a,null,l.a.createElement(z.a,null,l.a.createElement(I.a,{button:!0,onClick:function(){return K(!J)}},l.a.createElement(T.a,{primary:null===j||void 0===j?void 0:null===(a=j.random)||void 0===a?void 0:null===(d=a.dialog)||void 0===d?void 0:d.leftList}),J?l.a.createElement(D.a,null):l.a.createElement(H.a,null)),l.a.createElement(B.a,{in:J,timeout:"auto",unmountOnExit:!0},l.a.createElement(z.a,{component:"div",disablePadding:!0},V.length?V.map((function(e){return l.a.createElement(I.a,{key:e.id,button:!0,className:O.nested},l.a.createElement(T.a,{primary:"".concat(Z(e.id)," ").concat(Z(e.id,!0)?"(".concat(Z(e.id,!0),")"):""),secondary:"".concat((e.weight/Y*100).toFixed(2),"%")}))})):l.a.createElement(I.a,{button:!0,className:O.nested},l.a.createElement(T.a,{secondary:null===j||void 0===j?void 0:null===(r=j.random)||void 0===r?void 0:null===(u=r.dialog)||void 0===u?void 0:u.empty})))),l.a.createElement(I.a,{button:!0,onClick:function(){return S(!L)}},l.a.createElement(T.a,{primary:null===j||void 0===j?void 0:null===(c=j.random)||void 0===c?void 0:null===(v=c.dialog)||void 0===v?void 0:v.pickedList}),L?l.a.createElement(D.a,null):l.a.createElement(H.a,null)),l.a.createElement(B.a,{in:L,timeout:"auto",unmountOnExit:!0},l.a.createElement(z.a,{component:"div",disablePadding:!0},b.length?b.map((function(e){return l.a.createElement(I.a,{key:e.id,button:!0,className:O.nested},l.a.createElement(T.a,{primary:"".concat(Z(e.id))}))})):l.a.createElement(I.a,{button:!0,className:O.nested},l.a.createElement(T.a,{secondary:null===j||void 0===j?void 0:null===(m=j.random)||void 0===m?void 0:null===(g=m.dialog)||void 0===g?void 0:g.empty})))))),l.a.createElement(F.a,null,l.a.createElement(x.a,{onClick:k,autoFocus:!0,color:"secondary"}," ",null===j||void 0===j?void 0:null===(f=j.random)||void 0===f?void 0:null===(h=f.dialog)||void 0===h?void 0:h.returnButton)))}var K=n(40),Q=n(208),U=Object(v.a)((function(e){return{nested:{paddingLeft:e.spacing(2)}}}));function V(e){var t,n,a,d,r,u,c=e.randomList,v=e.onClose,m=e.open,g=U(),f=Object(o.useContext)(y.a).translation,h=Object(s.a)(),b=Object(N.a)(h.breakpoints.down("sm")),p=c.map((function(e){return Object(K.a)({},e,{weight:e.defaultWeight})})).sort((function(e,t){return t.defaultWeight-e.defaultWeight})),E=Object(o.useState)(p),k=Object(i.a)(E,2),C=k[0],O=k[1];function j(e){return function(t,n){null===v||void 0===v||v(t,e?C:null,n)}}function W(e){var t,n,i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null===(t=null===f||void 0===f?void 0:null===(i=f.random)||void 0===i?void 0:i.locationList)||void 0===t?void 0:null===(n=t[null!==e&&void 0!==e?e:""])||void 0===n?void 0:n[a?"alias":"name"]}return l.a.createElement(A.a,{onClose:j(!1),"aria-labelledby":"customize-dialog-title",open:m,fullScreen:b,fullWidth:!0,maxWidth:"sm"},l.a.createElement(P.a,{id:"customize-dialog-title"},null===f||void 0===f?void 0:null===(t=f.random)||void 0===t?void 0:null===(n=t.dialog)||void 0===n?void 0:n.customizeTitle),l.a.createElement(R.a,null,l.a.createElement("form",{autoComplete:"off"},l.a.createElement(z.a,{component:"div",disablePadding:!0},C.map((function(e){var t,n,i,a,o;return l.a.createElement(I.a,{key:e.id,button:!0,className:g.nested},l.a.createElement(T.a,{primary:"".concat(W(e.id)," ").concat(W(e.id,!0)?"(".concat(W(e.id,!0),")"):""),secondary:"".concat(null===f||void 0===f?void 0:null===(t=f.random)||void 0===t?void 0:null===(n=t.dialog)||void 0===n?void 0:n.defaultWeightTag).concat(e.defaultWeight)}),l.a.createElement(Q.a,{id:"input-".concat(e.id),label:null===f||void 0===f?void 0:null===(i=f.random)||void 0===i?void 0:null===(a=i.dialog)||void 0===a?void 0:a.weight,required:!0,type:"number",value:e.weight,onChange:(o=e.id,function(e){var t=+e.target.value;O((function(e){var n=Object(M.a)(e);return n.find((function(e){return e.id===o})).weight=t>0?t:0,n}))})}))}))))),l.a.createElement(F.a,null,l.a.createElement(x.a,{onClick:j(!0),color:"secondary"},null===f||void 0===f?void 0:null===(a=f.random)||void 0===a?void 0:null===(d=a.dialog)||void 0===d?void 0:d.submitButton),l.a.createElement(x.a,{onClick:j(!1),color:"primary"},null===f||void 0===f?void 0:null===(r=f.random)||void 0===r?void 0:null===(u=r.dialog)||void 0===u?void 0:u.cancelButton)))}function Y(e,t){var n,i,a;switch(t.type){case"pick":if(0===e.randomList.length)return Object(K.a)({},e,{done:!0});var o=Math.random()*e.totalWeight,l={weight:0},d=!0,r=!1,u=void 0;try{for(var c,v=e.randomList[Symbol.iterator]();!(d=(c=v.next()).done);d=!0){var s=c.value;if((o-=s.weight)<0){l=s;break}}}catch(m){r=!0,u=m}finally{try{d||null==v.return||v.return()}finally{if(r)throw u}}return Object(K.a)({},e,{pickedItem:l,randomList:e.randomList.filter((function(e){return e!==l})),pickedList:[].concat(Object(M.a)(e.pickedList),[l]),totalWeight:e.totalWeight-l.weight,done:!1});case"reset":return Z(null!==(n=t.originalList)&&void 0!==n?n:e.originalList,null!==(i=t.condition)&&void 0!==i?i:e.condition,null!==(a=t.coords)&&void 0!==a?a:e.coords);default:throw new TypeError("Wrong action.type!")}}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0,i=e.map((function(e){return Object(K.a)({},e,{weight:$(t,e,n)})}));return{pickedItem:null,originalList:Object(M.a)(e),condition:t,coords:n,randomList:i,pickedList:[],totalWeight:i.reduce((function(e,t){return e+t.weight}),0),done:!1}}function $(e,t,n){var a;switch(e){case"nearest":if(!n)throw new TypeError("coords does not exist!");var o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6371e3,a=function(e){return Math.PI*e/180},o=[e.latitude,t.latitude,e.longitude,t.longitude].map(a),l=Object(i.a)(o,4),d=l[0],r=l[1],u=l[2],c=l[3],v=r-d,s=c-u,m=Math.pow(Math.sin(v/2),2)+Math.cos(d)*Math.cos(r)*Math.pow(Math.sin(s/2),2),g=2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));return n*g}(t,n);return o<500?4*t.defaultWeight:o<1e3?3*t.defaultWeight:o<2e3?2*t.defaultWeight:1*t.defaultWeight;case"customize":return null!==(a=t.weight)&&void 0!==a?a:t.defaultWeight;default:return t.defaultWeight}}var _=n(163),ee=n(213),te=[{id:"XiaoFu",latitude:25.018525,longitude:121.537426,defaultWeight:4},{id:"ApexBuilding",latitude:25.014697,longitude:121.537902,defaultWeight:4},{id:"TsunHsien",latitude:25.013202,longitude:121.536323,defaultWeight:2},{id:"NewMoonPavilion",latitude:25.018563,longitude:121.534016,defaultWeight:1},{id:"DrunkenMoonLake",latitude:25.020154,longitude:121.538194,defaultWeight:2},{id:"SportsCenter",latitude:25.021653,longitude:121.53513,defaultWeight:1},{id:"CheeChun",latitude:25.021739,longitude:121.537294,defaultWeight:1},{id:"M1",latitude:25.015991,longitude:121.544738,defaultWeight:4},{id:"M7",latitude:25.015175,longitude:121.546959,defaultWeight:1},{id:"M8",latitude:25.016973,longitude:121.544982,defaultWeight:1},{id:"F9",latitude:25.019434,longitude:121.539474,defaultWeight:2},{id:"XiaoXiaoFu",latitude:25.015451,longitude:121.537217,defaultWeight:2},{id:"118",latitude:25.021954,longitude:121.542822,defaultWeight:4},{id:"Wenzhou",latitude:25.018717,longitude:121.533541,defaultWeight:4},{id:"Gongguan",latitude:25.016049,longitude:121.532804,defaultWeight:4},{id:"Shuiyuan",latitude:25.013742,longitude:121.534973,defaultWeight:4}];n.d(t,"default",(function(){return ie}));var ne=Object(v.a)((function(e){return{result:{color:e.palette.grey[100],textAlign:"center"},gridContainer:{flexGrow:1,margin:0,width:"100%",padding:e.spacing(2)},gridItem:{},snackbar:Object(a.a)({},e.breakpoints.down("xs"),{bottom:90})}}));function ie(){var e,t,n,a,d,r,u,v,s,m,g,f,h,b,p,E,k,O,j,W=ne(),w=Object(o.useContext)(y.a).translation,L=(j=te,Object(o.useReducer)(Y,j,Z)),M=Object(i.a)(L,2),N=M[0],z=N.pickedItem,I=N.totalWeight,T=N.randomList,B=N.pickedList,P=N.originalList,F=N.done,R=M[1],A=l.a.useState(0),G=Object(i.a)(A,2),D=G[0],q=G[1],H=l.a.useState("default"),X=Object(i.a)(H,2),K=X[0],Q=X[1],U=l.a.useState(!1),$=Object(i.a)(U,2),ie=$[0],ae=$[1],oe=l.a.useState(!1),le=Object(i.a)(oe,2),de=le[0],re=le[1],ue=l.a.useState(!1),ce=Object(i.a)(ue,2),ve=ce[0],se=ce[1],me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=Object(o.useState)({latitude:0,longitude:0}),a=Object(i.a)(n,2),l=a[0],d=a[1],r=Object(o.useState)(!1),u=Object(i.a)(r,2),c=u[0],v=u[1];return Object(o.useEffect)((function(){if(c){if(console.log(c),!navigator.geolocation)throw new ReferenceError("\u700f\u89bd\u5668\u4e0d\u652f\u63f4 Geolocation \u529f\u80fd\uff01");navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,i=t.longitude;d({latitude:n,longitude:i}),v(!1)}),(function(e){throw e}),{enableHighAccuracy:!0,timeout:t,maximumAge:e})}}),[e,t,c]),{coords:l,isPending:c,startGeolocation:function(){return v(!0)}}}(),ge=me.coords,fe=me.isPending,he=me.startGeolocation,be=[{id:"default",name:null===w||void 0===w?void 0:null===(e=w.random)||void 0===e?void 0:null===(t=e.randomType)||void 0===t?void 0:t.default},{id:"nearest",name:null===w||void 0===w?void 0:null===(n=w.random)||void 0===n?void 0:null===(a=n.randomType)||void 0===a?void 0:a.nearest},{id:"customize",name:null===w||void 0===w?void 0:null===(d=w.random)||void 0===d?void 0:null===(r=d.randomType)||void 0===r?void 0:r.customize}];function pe(e){R({type:"reset"})}return l.a.useEffect((function(){F&&se(!0)}),[F]),l.a.useEffect((function(){"nearest"!==K||fe||R({type:"reset",condition:"nearest",coords:ge})}),[K,fe,R,ge]),l.a.createElement(l.a.Fragment,null,l.a.createElement(c,{index:D,onChangeIndex:function(e,t){var n=be[t].id;Q(n),q(t),"nearest"!==n?"customize"!==n?R({type:"reset",originalList:te,condition:n}):re(!0):he()},list:be}),l.a.createElement(_.a,{container:!0,justify:"center",alignItems:"center",className:W.gridContainer}," ",l.a.createElement(_.a,{item:!0,xs:12,sm:6,md:4,className:W.gridItem},l.a.createElement(S,{title:function(e){var t,n,i,a;return"nearest"===K&&!0===fe?null===w||void 0===w?void 0:null===(t=w.random)||void 0===t?void 0:null===(n=t.resultCard)||void 0===n?void 0:n.locating:null!==e&&void 0!==e?e:null===w||void 0===w?void 0:null===(i=w.random)||void 0===i?void 0:null===(a=i.resultCard)||void 0===a?void 0:a.defaultTitle}(null===(u=null===w||void 0===w?void 0:null===(s=w.random)||void 0===s?void 0:s.locationList)||void 0===u?void 0:null===(v=u[null!==(m=null===z||void 0===z?void 0:z.id)&&void 0!==m?m:""])||void 0===v?void 0:v.name),subtitle:null===(g=null===w||void 0===w?void 0:null===(h=w.random)||void 0===h?void 0:h.locationList)||void 0===g?void 0:null===(f=g[null!==(b=null===z||void 0===z?void 0:z.id)&&void 0!==b?b:""])||void 0===f?void 0:f.alias,onResetClick:pe,onCheckClick:function(){ae(!0)}}))),l.a.createElement(C,{isResetButton:F,onClick:function(){R(F?{type:"reset",condition:K,coords:ge}:{type:"pick"})},disabled:fe}),l.a.createElement(J,{randomList:T,pickedList:B,totalWeight:I,open:ie,onClose:function(){return ae(!1)}}),l.a.createElement(V,{randomList:P,open:de,onClose:function(e,t){if(re(!1),null==t)return q(0),Q("default"),void R({type:"reset",originalList:te,condition:"default"});R({type:"reset",condition:"customize",originalList:t})}}),l.a.createElement(ee.a,{open:ve,autoHideDuration:3e3,message:null===w||void 0===w?void 0:null===(p=w.random)||void 0===p?void 0:null===(E=p.snackbar)||void 0===E?void 0:E.msg,onClose:function(){return se(!1)},action:l.a.createElement(x.a,{color:"inherit",size:"small",onClick:pe},null===w||void 0===w?void 0:null===(k=w.random)||void 0===k?void 0:null===(O=k.snackbar)||void 0===O?void 0:O.button),className:W.snackbar}))}}}]);
//# sourceMappingURL=6.192717ff.chunk.js.map